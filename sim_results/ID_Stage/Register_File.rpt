There are some problems in the vhdl code, I will work on night and develop a similar verilog code, check your mail in the morning
